<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kraken Dual Ticker</title>
    <style>
        /* Optimized for the Kraken Elite 640x640 circular display */
        body { 
            background-color: black; 
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
            overflow: hidden; 
            text-align: center; 
        }
        #container { 
            width: 85%; /* Margin to prevent edge-clipping on circular screens */
        }
        .metric { margin-bottom: 20px; }
        .label { 
            font-size: 24px; 
            text-transform: uppercase; 
            letter-spacing: 3px; 
            margin-bottom: 2px;
            font-weight: 600;
        }
        .gold-label { color: #FFD700; }
        .silver-label { color: #C0C0C0; }
        .price { 
            font-size: 82px; 
            font-weight: 900; 
            color: white; 
            line-height: 1;
        }
        .currency { font-size: 16px; color: #444; margin-top: 10px; letter-spacing: 1px; }
    </style>
</head>
<body>
    <div id="container">
        <!-- Gold Section -->
        <div class="metric">
            <div class="label gold-label">Gold</div>
            <div id="gold-price" class="price">...</div>
        </div>
        
        <!-- Silver Section -->
        <div class="metric">
            <div class="label silver-label">Silver</div>
            <div id="silver-price" class="price">...</div>
        </div>
        
        <div class="currency">USD / TROY OZ</div>
    </div>

    <script>
        const apiKey = "goldapi-5rs3osmlrifcqo-io";
        const headers = new Headers();
        headers.append("x-access-token", apiKey);
        headers.append("Content-Type", "application/json");

        async function fetchPrice(metal, elementId) {
            try {
                const response = await fetch(`https://www.goldapi.io{metal}/USD`, {
                    method: 'GET',
                    headers: headers
                });
                const data = await response.json();
                
                // Formats to 2 decimal places with a dollar sign
                const formattedPrice = new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD',
                    minimumFractionDigits: 2
                }).format(data.price);

                document.getElementById(elementId).innerText = formattedPrice;
            } catch (error) {
                document.getElementById(elementId).innerText = "ERROR";
                console.error("API Call Failed:", error);
            }
        }

        function updateDisplay() {
            fetchPrice("XAU", "gold-price"); // Gold API call
            fetchPrice("XAG", "silver-price"); // Silver API call
        }

        // Run immediately on load
        updateDisplay();
        
        // Refresh every 10 minutes to stay within free tier usage (600,000ms)
        setInterval(updateDisplay, 600000);
    </script>
</body>
</html>
